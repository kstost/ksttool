!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var i={math:{}};i.math.HALF_PI=Math.PI/2,i.math.EPSILON=1e-7,i.math.INFINITY=959e4,i.math.TINYNANO=52e-14,i.CIRCLE_COLLIDER=0,i.RECTANGLE_COLLIDER=1,i.POLYGON_COLLIDER=2,i.LINE_TWOPOINT_COLLIDER=3,i.TAG_GUIDE_LINE=10001,i.ACTIVE_INSIDE_COLLISION=!0,i.OPTION_LEVEL_FULL=0,i.OPTION_LEVEL_LIGHT=1,i.ALIGN_VERTICAL_TOP=0,i.ALIGN_VERTICAL_MIDDLE=1,i.ALIGN_VERTICAL_BOTTOM=2,i.ALIGN_VERTICAL_MATCHTOP=6,i.ALIGN_VERTICAL_MATCHBOTTOM=7,i.ALIGN_HORIZONTAL_LEFT=3,i.ALIGN_HORIZONTAL_CENTER=4,i.ALIGN_HORIZONTAL_RIGHT=5,i.ALIGN_HORIZONTAL_MATCHLEFT=8,i.ALIGN_HORIZONTAL_MATCHRIGHT=9,i.VECTOR_CHAIN_TYPE_NONE=0,i.VECTOR_CHAIN_TYPE_PLP=1,i.VECTOR_CHAIN_TYPE_XYX=2,i.points_to_polypath=function(e){var t=0,n=[];return e.forEach(i=>{var o=e[t+1];void 0===o&&(o=e[0]),n.push({first:e[t],second:o}),t++}),n},i.divide_square_into=function(e,t,n){for(var i=(2*e+2*t)/((n+=1)-1),o=[],r=0;r<n-1;r++)o.push((r+1)*i);var _=[0,e,e+t,e+t+e,e+t+e+t],c=[];for(r=0;r<_.length-1;r++)for(var a=0;a<o.length;a++){var l=o[a];if(_[r]<l&&_[r+1]>=l){var s=l-_[r],h=null;0==r&&(h={x:0+s,y:0}),1==r&&(h={x:e,y:0+s}),2==r&&(h={x:e+(s*=-1),y:t}),3==r&&(h={x:0,y:t+(s*=-1)}),c.push(h)}}return c},i.math.get_distance_between_two_circle=function(e,t){return i.math.get_distance_between_two_point(e.getPosition(),t.getPosition())-(i.getNodeSize(e).as_circle.r+i.getNodeSize(t).as_circle.r)},i.math.get_destination_point_with_angle_and_distance=function(e,t,n,o){var r;o||(o=1),r=i.math.get_distance_between_two_point(e,t)*o;var _=i.math.convert_degrees_to_radian(i.math.convert_radian_to_degrees(i.math.get_angle_in_radian_between_two_points(e,t)));return{x:n.x+Math.cos(_)*r,y:n.y+Math.sin(_)*r}},i.math.get_line_degree=function(e,t){var n=360-(180-Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI));return 360==n&&(n=0),{degree:n,wdgr:n>180?n-180:n}},i.math.calc_angle=function(e,t,n){var o=180-n-2*(90-i.math.get_line_degree(e,t).wdgr);return o<0&&(o+=360),o},i.math.conv_degree_for_human=function(e,t){return t?-180==(e-=180)&&(e=180):360==(e+=180)&&(e=0),e},i.stick_flying_rect_node_on_border_rect_node=function(e,t){var n=i.getNodeSize(e).as_rectangle,o=i.getNodeSize(t).as_rectangle,r=i.get_node_speed_and_direction_angle(e);if(r.last_coordinate_x=r.last_coordinate_x-n.w/2,r.last_coordinate_y=cc.winSize.height-(r.last_coordinate_y+n.h/2),!isNaN(r.last_coordinate_x)&&!isNaN(r.last_coordinate_y)&&null!=r.last_coordinate_x&&null!=r.last_coordinate_y){var _={x:r.last_coordinate_x,y:r.last_coordinate_y,w:n.w,h:n.h},c=i.check_rectangle_position(_,o),a=null;1==c&&(a={x:o.x-(n.w/2+i.math.EPSILON),y:cc.winSize.height-(o.y-n.h/2-i.math.EPSILON)}),7==c&&(a={x:o.x-(n.w/2+i.math.EPSILON),y:cc.winSize.height-(o.y+o.h+n.h/2+i.math.EPSILON)}),4==c&&(a={x:o.x-(n.w/2+i.math.EPSILON),y:cc.winSize.height-(n.y+n.h/2)}),6==c&&(a={x:o.x+o.w+(n.w/2+i.math.EPSILON),y:cc.winSize.height-(n.y+n.h/2)}),8==c&&(a={x:n.x+n.w/2,y:cc.winSize.height-(o.y+o.h+n.h/2+i.math.EPSILON)}),9==c&&(a={x:o.x+o.w+(n.w/2+i.math.EPSILON),y:cc.winSize.height-(o.y+o.h+n.h/2+i.math.EPSILON)}),2==c&&(a={x:n.x+n.w/2,y:cc.winSize.height-(o.y-n.h/2-i.math.EPSILON)}),3==c&&(a={x:o.x+o.w+(n.w/2+i.math.EPSILON),y:cc.winSize.height-(o.y-n.h/2-i.math.EPSILON)}),a&&e.setPosition(a.x,a.y)}},i.get_distance_between_two_rectangle=function(e,t){var n=null,o=i.check_rectangle_position(e,t);return 1==o&&(n=i.math.get_distance_between_two_point({x:e.x+e.w,y:e.y+e.h},{x:t.x,y:t.y})),2==o&&(n=t.y-(e.y+e.h)),3==o&&(n=i.math.get_distance_between_two_point({x:e.x,y:e.y+e.h},{x:t.x+t.w,y:t.y})),4==o&&(n=t.x-(e.x+e.w)),5==o&&(n=0),6==o&&(n=e.x-(t.x+t.w)),7==o&&(n=i.math.get_distance_between_two_point({x:e.x+e.w,y:e.y},{x:t.x,y:t.y+t.h})),8==o&&(n=e.y-(t.y+t.h)),9==o&&(n=i.math.get_distance_between_two_point({x:e.x,y:e.y},{x:t.x+t.w,y:t.y+t.h})),n},i.check_rectangle_position=function(e,t){return t.y>=e.y+e.h&&t.x>=e.x+e.w?1:t.y>=e.y+e.h&&t.x+t.w<=e.x?3:t.y+t.h<=e.y&&t.x+t.w<=e.x?9:t.y+t.h<=e.y&&t.x>=e.x+e.w?7:t.y>=e.y+e.h?2:t.y+t.h<=e.y?8:t.x>=e.x+e.w?4:t.x+t.w<=e.x?6:5},i.math.set_sticked_point_on_direction_of_two_circle=function(e,t,n,o){for(var r=window.performance.now(),_=4*n.r,c=i.math.get_coordinate_of_arc_between_center_of_the_circle_and_the_other_coordinate(_,e,t),a=e,l=!1,s=0,h=null;!l;){if((h=i.math.get_coordinate_between_two_points(a,c,.5)).r=e.r,i.check_if_two_circle_are_overlapped_with_their_center_coordinate_and_radius(n,h))a=h;else c=h,i.math.get_distance_between_two_point(h,n)-(n.r+h.r)<.05&&(l=!0);++s>1e3&&(l=!0)}if(!o){var d=h.r;(h=i.math.get_coordinate_of_arc_between_center_of_the_circle_and_the_other_coordinate(n.r+h.r+i.math.EPSILON,n,h)).r=d}return h.counter=s,h.execute_time=window.performance.now()-r,h},i.math.get_coordinate_distance_away_from_center_with_degree=function(e,t,n){var o=i.math.convert_degrees_to_radian(n);return{x:t.x+Math.cos(o)*e,y:t.y+Math.sin(o)*e}},i.force_positive=function(e){return e<0?-e:e},i.math.get_coordinate_of_arc_between_center_of_the_circle_and_the_other_coordinate=function(e,t,n){var o=i.math.get_angle_in_radian_between_two_points(n,t);return{x:t.x+Math.cos(o)*e,y:t.y+Math.sin(o)*e}},i.math.get_angle_in_radian_between_two_points=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)},i.math.get_distance_between_two_point=function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},i.math.get_coordinate_between_two_points=function(e,t,n){var o=i.math.get_distance_between_two_point(e,t);return i.math.get_coordinate_of_arc_between_center_of_the_circle_and_the_other_coordinate(o*n,e,t)},i.math.convert_radian_to_degrees=function(e){return e*(180/Math.PI)},i.math.convert_degrees_to_radian=function(e){return e*(Math.PI/180)},i.math.rotation_coordinate=function(e,t,n,o){o||(n=360-n);var r=i.math.convert_degrees_to_radian(n),_=Math.cos(r),c=Math.sin(r);return{x:_*(t.x-e.x)+c*(t.y-e.y)+e.x,y:_*(t.y-e.y)-c*(t.x-e.x)+e.y}},i.math.generate_random_value=function(e,t){var n=arguments.length;if(0===n)e=0,t=2147483647;else if(1===n)throw new Error("Warning: rand() expects exactly 2 parameters, 1 given");return Math.floor(Math.random()*(t-e+1))+e},i.rand=function(e,t){return i.math.generate_random_value(e,t)},i.get_node_speed_and_direction_angle=function(e){var t={};return null==e.move_speed||isNaN(e.move_speed)?t.move_speed=0:t.move_speed=e.move_speed,null==e.last_moved_angle||isNaN(e.last_moved_angle)||(t.last_moved_angle=e.last_moved_angle),null==e.last_coordinate_x||isNaN(e.last_coordinate_x)||(t.last_coordinate_x=e.last_coordinate_x),null==e.last_coordinate_y||isNaN(e.last_coordinate_y)||(t.last_coordinate_y=e.last_coordinate_y),t},i.update_node_move_information=function(e,t){t||(t=e.getPosition()),e.before_coordinate_x==t.x&&e.before_coordinate_y==t.y||(e.last_moved_angle=i.math.get_angle_in_radian_between_two_points({x:e.before_coordinate_x,y:e.before_coordinate_y},{x:t.x,y:t.y}),e.last_coordinate_x=e.before_coordinate_x,e.last_coordinate_y=e.before_coordinate_y),e.move_speed=i.math.get_distance_between_two_point({x:e.before_coordinate_x,y:e.before_coordinate_y},t),e.before_coordinate_x=t.x,e.before_coordinate_y=t.y},i.set_seperate_stick_two_circle=function(e,t,n){var o=i.getNodeSize(e).as_circle,r=i.getNodeSize(t).as_circle,_=i.get_node_speed_and_direction_angle(e),c=i.get_node_speed_and_direction_angle(t),a=null;n?(_.move_speed>c.move_speed||0==_.move_speed&&0==c.move_speed)&&(a=i.math.get_coordinate_of_arc_between_center_of_the_circle_and_the_other_coordinate(r.r+o.r+i.math.EPSILON,r,o)):null!=e.stick_ticket&&(delete e.stick_ticket,delete t.stick_ticket,null!=a||null==e.last_moved_angle||isNaN(e.last_moved_angle)||(a=i.math.set_sticked_point_on_direction_of_two_circle(o,{x:o.x+Math.cos(-1*e.last_moved_angle)*o.r,y:o.y+Math.sin(-1*e.last_moved_angle)*o.r,r:o.r},r))),a&&e.setPosition(a.x,cc.winSize.height-a.y)},i.getPosition=function(e){var t=e.getPosition();return t.y=cc.winSize.height-t.y,t},i.setPositionTo=function(e,t){e.setPosition(t.x,cc.winSize.height-t.y)},i.getAdvPosition=function(e){var t=i.getNodeSize(e).as_rectangle,n=i.getPosition(e);return n.x-=t.w/2,n.y-=t.h/2,n.w=t.w,n.h=t.h,n},i.setPositionAdvTo=function(e,t,n){if("object"==typeof t)if(t.hasOwnProperty("x")&&t.hasOwnProperty("y")){var o=i.getNodeSize(e).as_rectangle;e.setPosition(t.x+o.w/2,e.getParent().height-t.y+-o.h/2)}else if(t.hasOwnProperty("v")||t.hasOwnProperty("h")){o=i.getAdvPosition(e);var r=null;null!=n&&null!=n&&(r=i.getAdvPosition(n));var _=0,c=0;t.hasOwnProperty("v")&&(t.v==i.ALIGN_VERTICAL_MATCHTOP&&(c=r.y),t.v==i.ALIGN_VERTICAL_MATCHBOTTOM&&(c=r.y-(o.h-r.h)),t.v==i.ALIGN_VERTICAL_TOP&&(c=null==r?0:r.y-o.h),t.v==i.ALIGN_VERTICAL_MIDDLE&&(c=null==r?(e.getParent().height-o.h)/2:r.y-(o.h-r.h)/2),t.v==i.ALIGN_VERTICAL_BOTTOM&&(c=null==r?e.getParent().height-o.h:r.y+r.h)),t.hasOwnProperty("h")&&(t.h==i.ALIGN_HORIZONTAL_MATCHLEFT&&(_=r.x),t.h==i.ALIGN_HORIZONTAL_MATCHRIGHT&&(_=r.x-(o.w-r.w)),t.h==i.ALIGN_HORIZONTAL_LEFT&&(_=null==r?0:r.x-o.w),t.h==i.ALIGN_HORIZONTAL_CENTER&&(_=null==r?(e.getParent().width-o.w)/2:r.x-(o.w-r.w)/2),t.h==i.ALIGN_HORIZONTAL_RIGHT&&(_=null==r?e.getParent().width-o.w:r.x+r.w)),t.hasOwnProperty("vmargin")&&(c+=t.vmargin),t.hasOwnProperty("hmargin")&&(_+=t.hmargin),i.setPositionAdvTo(e,{x:_,y:c},n)}},i.setPositionBy=function(e,t){var n=null;if(t.x&&t.y&&(n=e.getPosition()),t.x){var i=null;null!=n&&(i=n.x),null==i&&(i=e.getPositionX()),e.setPositionX(i+t.x)}if(t.y){var o=null;null!=n&&(o=n.y),null==o&&(o=e.getPositionY()),e.setPositionY(o+-1*t.y)}},i.draw_guide_line_for_polygon_collider=function(e,t,n){for(;n&&e.getChildByTag(i.TAG_GUIDE_LINE);)e.removeChildByTag(i.TAG_GUIDE_LINE);var o=t;if(o.collider_type==i.RECTANGLE_COLLIDER||o.collider_type==i.POLYGON_COLLIDER)for(var r=i.get_polygon_line_path(o),_=0;_<r.length;_++){var c=new cc.DrawNode,a={x:r[_].first.x,y:cc.winSize.height-r[_].first.y},l={x:r[_].second.x,y:cc.winSize.height-r[_].second.y};c.drawSegment(a,l,1),c.setTag(i.TAG_GUIDE_LINE),e.addChild(c)}if(o.collider_type==i.CIRCLE_COLLIDER){var s=i.getNodeSize(o).as_circle;(c=new cc.DrawNode).drawCircle(cc.p(s.x,cc.winSize.height-s.y),s.r,0,15,!0,2),c.setTag(i.TAG_GUIDE_LINE),e.addChild(c)}},i.get_min_max_value_of_polygon_list=function(e){var t={x:null,y:null},n={x:null,y:null};for(var i in e){var o="",r="";r="first",(null==t[o="x"]||t[o]>e[i][r][o])&&(t[o]=e[i][r][o]),r="second",(null==t[o]||t[o]>e[i][r][o])&&(t[o]=e[i][r][o]),r="first",(null==t[o="y"]||t[o]>e[i][r][o])&&(t[o]=e[i][r][o]),r="second",(null==t[o]||t[o]>e[i][r][o])&&(t[o]=e[i][r][o]),r="first",(null==n[o="x"]||n[o]<e[i][r][o])&&(n[o]=e[i][r][o]),r="second",(null==n[o]||n[o]<e[i][r][o])&&(n[o]=e[i][r][o]),r="first",(null==n[o="y"]||n[o]<e[i][r][o])&&(n[o]=e[i][r][o]),r="second",(null==n[o]||n[o]<e[i][r][o])&&(n[o]=e[i][r][o])}return{max:n,min:t}},i.get_parent_node_list=function(e){for(var t=[],n=e.getParent();null!=n;)t.push(n),n=n.getParent();return t},i.checkPointIsInsideCircle=function(e,t){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)<=e.r*e.r},i.checkPointIsInsidePolygon=function(e,t){for(var n=e,i=!1,o=-1,r=n.length,_=r-1;++o<r;_=o)(n[o].first.y<=t.y&&t.y<n[_].first.y||n[_].first.y<=t.y&&t.y<n[o].first.y)&&t.x<(n[_].first.x-n[o].first.x)*(t.y-n[o].first.y)/(n[_].first.y-n[o].first.y)+n[o].first.x&&(i=!i);return i},i.checkPointIsInsideRectangle=function(e,t){var n=function(e,t,n){return e<n&&t>e&&t<n||(e>n&&t>n&&t<e||(t==e||t==n))};return n(e.x,t.x,e.x+e.w)&&n(e.y,t.y,e.y+e.h)},i.isPointIsInsideNode=function(e,t,n,o){if(e.collider_type==i.CIRCLE_COLLIDER)return o||(o=i.getNodeSize(e).as_circle),i.checkPointIsInsideCircle(o,t);if(e.collider_type==i.RECTANGLE_COLLIDER&&e.option_level==i.OPTION_LEVEL_LIGHT){var r=i.getNodeSize(e).as_rectangle;return i.checkPointIsInsideRectangle(r,t)}return e.collider_type==i.RECTANGLE_COLLIDER||e.collider_type==i.POLYGON_COLLIDER?(n||(n=i.get_polygon_line_path(e)),i.checkPointIsInsidePolygon(n,t)):void 0},i.calc_center=function(e){return{x:e.x+e.w/2,y:e.y+e.h/2}},i.check_intersection_advanced_line_circle=function(e,t){},i.math.get_point_on_arc=function(e,t){let n=!0;for(var o=i.math.get_angle_in_radian_between_two_points(e,t),r=e.r;n;){var _=i.math.get_coordinate_distance_away_from_center_with_radian(r,e,o);if(i.math.get_distance_between_two_point(e,_)>=e.r)return n=!1,_;r+=i.math.EPSILON}},i.check_intersection_line_circle=function(e,t){let n,o,r=Math.sqrt,_=null,c=e.second.x-e.first.x,a=e.second.y-e.first.y,l=r(c*c+a*a),s=c/l,h=a/l,d=s*(t.x-e.first.x)+h*(t.y-e.first.y),f=d*s+e.first.x,g=d*h+e.first.y,y=r((f-t.x)*(f-t.x)+(g-t.y)*(g-t.y)),u=function(e,t){let n=e.r,i=Math.atan2(e.y-t.y,e.x-t.x)+Math.PI;for(;;){t.x=e.x+Math.cos(i)*n,t.y=e.y+Math.sin(i)*n;let o=e.x-t.x,_=e.y-t.y;if(r(o*o+_*_)>=e.r)return t;n+=1e-7}};for(let l=0;l<3;l++){l>1&&(l=-1);{let i=e.first.x-t.x,_=e.first.y-t.y,c=e.second.x-t.x,a=e.second.y-t.y,s=1e-7*l;n=r(i*i+_*_)+s,o=r(c*c+a*a)+s}let x=n>=t.r,p=o>=t.r,w=x&&o<t.r||p&&n<t.r;if(y<t.r){let n=r(t.r*t.r-y*y)-1e-7,i=d-n,o=d+n,l=s*c+h*a,f=i<0||i>l,g=o<0||o>l;!w&&f&&g?_=[]:w&&f?_=[u(t,{x:o*s+e.first.x,y:o*h+e.first.y})]:w&&g&&(_=[u(t,{x:i*s+e.first.x,y:i*h+e.first.y})]),!_&&x&&p&&(_=[u(t,{x:i*s+e.first.x,y:i*h+e.first.y}),u(t,{x:o*s+e.first.x,y:o*h+e.first.y})])}else if(y==t.r){let n={x:f,y:g},o={x:f,y:g},r=i.math.get_angle_in_radian_between_two_points(t,n),c=i.math.get_coordinate_distance_away_from_center_with_radian(i.math.get_distance_between_two_point(t,n)+1e-7,t,r);i.check_intersection_line_line({first:t,second:c},e,!0)&&(n=u(t,n),o=u(t,o),_=[n,o])}if(_||w||(_=[]),null!==_||-1==l)return _}return[]},i.check_intersection_legacy_line_circle=function(e,t){let n,o,r,_,c,a,l,s,h,d;if(h={},d={},h.x=e.second.x-e.first.x,h.y=e.second.y-e.first.y,d.x=e.first.x-t.x,d.y=e.first.y-t.y,n=h.x*d.x+h.y*d.y,o=2*(h.x*h.x+h.y*h.y),n*=-2,r=Math.sqrt(n*n-2*o*(d.x*d.x+d.y*d.y-t.r*t.r)),isNaN(r)){var f=null,g=null,y=e.second.x-e.first.x,u=e.second.y-e.first.y,x=Math.sqrt(y*y+u*u),p=y/x,w=u/x,m=p*(t.x-e.first.x)+w*(t.y-e.first.y),I=m*p+e.first.x,v=m*w+e.first.y,L=Math.sqrt((I-t.x)*(I-t.x)+(v-t.y)*(v-t.y));if(L<t.r){var b=Math.sqrt(t.r*t.r-L*L),E=p*(e.second.x-e.first.x)+w*(e.second.y-e.first.y);return(m-b<0||m-b>E)&&(m+b<0||m+b>E)?[]:m-b<0||m-b>E?((f={}).x=(m+b)*p+e.first.x,f.y=(m+b)*w+e.first.y,[f]):m+b<0||m+b>E?((f={}).x=(m-b)*p+e.first.x,f.y=(m-b)*w+e.first.y,[f]):(g={},(f={}).x=(m-b)*p+e.first.x,f.y=(m-b)*w+e.first.y,g.x=(m+b)*p+e.first.x,g.y=(m+b)*w+e.first.y,[f,g])}if(L==t.r){g={},(f={}).x=I,f.y=v,g.x=I,g.y=v;var P=i.math.get_angle_in_radian_between_two_points(t,f),N=i.math.get_coordinate_distance_away_from_center_with_radian(i.math.get_distance_between_two_point(t,f)+i.math.EPSILON,t,P);if(i.check_intersection_line_line({first:t,second:N},e,!0))return[f,g]}return[]}_=(n-r)/o,c=(n+r)/o,l={},s={};let O=[0,-i.math.EPSILON,i.math.EPSILON];a=[];var C=O.length;let T=null;for(T=0;T<C;T++)if(_+O[T]<=1&&_+O[T]>=0){l.x=e.first.x+h.x*(_+O[T]),l.y=e.first.y+h.y*(_+O[T]),a[0]=l;break}for(T=0;T<C;T++)if(c+O[T]<=1&&c+O[T]>=0){s.x=e.first.x+h.x*(c+O[T]),s.y=e.first.y+h.y*(c+O[T]),a[a.length]=s;break}return a},i.check_intersection_rect_rect=function(e,t){return!(t.left>e.right||t.right<e.left||t.top<e.bottom||t.bottom>e.top)},i.check_intersection_two_line=function(e,t,n,i,o,r,_,c,a){var l,s,h,d;return 0!=(l=(c-r)*(n-e)-(_-o)*(i-t))&&(d=(n-e)*(s=t-r)-(i-t)*(h=e-o),s=((_-o)*s-(c-r)*h)/l,h=d/l,a?{x:e+s*(n-e),y:t+s*(i-t),onLine1:s>0&&s<1,onLine2:h>0&&h<1}:s>0&&s<1&&h>0&&h<1&&{x:e+s*(n-e),y:t+s*(i-t)})},i.check_intersection_line_line=function(e,t,n){if(n)return i.check_intersection_two_line(e.first.x,e.first.y,e.second.x,e.second.y,t.first.x,t.first.y,t.second.x,t.second.y,!1);{let n=e,y=t;var o=n.first.x,r=n.first.y,_=n.second.x,c=n.second.y,a=y.first.x,l=y.first.y,s=y.second.x,h=y.second.y,d=function(e,t,n){return e-i.math.EPSILON<=t&&t<=n+i.math.EPSILON},f=((o*c-r*_)*(a-s)-(o-_)*(a*h-l*s))/((o-_)*(l-h)-(r-c)*(a-s)),g=((o*c-r*_)*(l-h)-(r-c)*(a*h-l*s))/((o-_)*(l-h)-(r-c)*(a-s));if(isNaN(f)||isNaN(g))return!1;if(o>=_){if(!d(_,f,o))return!1}else if(!d(o,f,_))return!1;if(r>=c){if(!d(c,g,r))return!1}else if(!d(r,g,c))return!1;if(a>=s){if(!d(s,f,a))return!1}else if(!d(a,f,s))return!1;if(l>=h){if(!d(h,g,l))return!1}else if(!d(l,g,h))return!1;return{x:f,y:g}}},i.getNodeSize=function(e,t){var n=e.option_level;if(n||(n=i.OPTION_LEVEL_FULL),t||(t=e.getPosition()),n!=i.OPTION_LEVEL_LIGHT){if(n==i.OPTION_LEVEL_FULL){var o=t,r=e.getParent().convertToWorldSpace(o),_=(v=e.getContentSize(),e.getScaleX()),c=e.getScaleY(),a={};a.rotationX=e.getRotationX(),a.rotationY=e.getRotationY(),a.scaleX=_,a.scaleY=c,_=(a=i.accumulate_reflection(e,a)).scaleX,c=a.scaleY;var l=v.width*_,s=v.height*c,h=r.x-l/2,d=r.y-s/2,f={x:h,y:cc.winSize.height-d-s,w:l,h:s,contentSizeW:v.width,contentSizeH:v.height,scaleX:_,scaleY:c,rotationX:a.rotationX,rotationY:a.rotationY};if(e.collider_type!=i.CIRCLE_COLLIDER)return{as_rectangle:f};w=0,m=0;return(y=f.w/2)<(u=f.h/2)?w=u-y:m=y-u,{as_circle:{x:f.x+y-m,y:f.y+u-w,r:I=y>u?u:y,scaleX:f.scaleX,scaleY:f.scaleY,rotationX:f.rotationX,rotationY:f.rotationY}}}return console.log("구현되지 않은 옵션입니다"),null}if(e.collider_type==i.CIRCLE_COLLIDER){var g=t;(v=e.getContentSize()).width*=e.getScaleX(),v.height*=e.getScaleY();var y,u,x=g.x-v.width/2,p=cc.winSize.height-(g.y-v.height/2)-v.height,w=0,m=0,I=0;return(y=v.width/2)>(u=v.height/2)?(I=u,m=y-u):(I=y,w=u-y),{as_circle:{x:x+y-m,y:p+u-w,r:I}}}if(e.collider_type==i.RECTANGLE_COLLIDER){var v;g=t;return(v=e.getContentSize()).width*=e.getScaleX(),v.height*=e.getScaleY(),{as_rectangle:{x:g.x-v.width/2,y:cc.winSize.height-(g.y+v.height/2),w:v.width,h:v.height}}}console.log("LIGHT option does not support polygon")},i.get_polygon_line_path=function(e){var t=i.getNodeSize(e).as_rectangle,n=null;if(e.collider_type==i.POLYGON_COLLIDER){if(e.hasOwnProperty("collide_polygon"))n=e.collide_polygon.path;else if(e.get_custom_box_attr("polygon_path")){var o=$cc.ccoo(cocosKst.const.sizeRatio.height),r=0-o+2*e.parent.getPosition().y,_=-e.parent.getPosition().y+o,c=e.get_custom_box_attr("polygon_path"),a=[];c.forEach(t=>{a.push({first:{x:t.first.x-e.parent.getPosition().x,y:r-(t.first.y-_)},second:{x:t.second.x-e.parent.getPosition().x,y:r-(t.second.y-_)}})}),n=a}}else if(e.collider_type==i.RECTANGLE_COLLIDER){if(e.option_level==i.OPTION_LEVEL_LIGHT)return[{first:{x:t.x,y:t.y},second:{x:t.x,y:t.y+t.h}},{first:{x:t.x,y:t.y+t.h},second:{x:t.x+t.w,y:t.y+t.h}},{first:{x:t.x+t.w,y:t.y+t.h},second:{x:t.x+t.w,y:t.y}},{first:{x:t.x+t.w,y:t.y},second:{x:t.x,y:t.y}}];n=[{first:{x:0,y:0},second:{x:0,y:t.contentSizeH}},{first:{x:0,y:t.contentSizeH},second:{x:t.contentSizeW,y:t.contentSizeH}},{first:{x:t.contentSizeW,y:t.contentSizeH},second:{x:t.contentSizeW,y:0}},{first:{x:t.contentSizeW,y:0},second:{x:0,y:0}}]}return n=i.calculate_duplicate_plp(n,t)},i.accumulate_reflection=function(e,t){t||(t=e.collider_type==i.CIRCLE_COLLIDER?i.getNodeSize(e).as_circle:i.getNodeSize(e).as_rectangle);var n={};n.rotationX=t.rotationX,n.rotationY=t.rotationY,n.scaleX=t.scaleX,n.scaleY=t.scaleY;for(var o=i.get_parent_node_list(e),r=0;r<o.length;r++)null!=o[r]&&o[r]instanceof cc.Node&&(n.rotationX+=o[r].getRotationX(),n.rotationY+=o[r].getRotationY(),n.scaleX*=o[r].getScaleX(),n.scaleY*=o[r].getScaleY());return n},i.calculate_duplicate_plp=function(e,t){for(var n=[],o=0;o<e.length;o++){var r={first:{x:e[o].first.x*t.scaleX+t.x+0,y:e[o].first.y*t.scaleY+t.y+0},second:{x:e[o].second.x*t.scaleX+t.x+0,y:e[o].second.y*t.scaleY+t.y+0}};if(0!=t.rotationX&&360!=t.rotationX){var _=i.calc_center(t);r.first=i.math.rotation_coordinate(_,r.first,t.rotationX,!1),r.second=i.math.rotation_coordinate(_,r.second,t.rotationX,!1)}n.push(r)}return n},i.check_collision_rectangle_circle=function(e,t){var n=i.getNodeSize(e).as_rectangle,o=i.getNodeSize(t).as_circle,r=n.w/2,_=n.h/2,c={x:o.x-(n.x+r),y:o.y-(n.y+_)},a=Math.abs(c.x)-r,l=Math.abs(c.y)-_;return!(a>o.r||l>o.r)&&(!(a<-o.r&&l<-o.r)&&(a<0||l<0||a*a+l*l<o.r*o.r))},i.get_circle_info=function(e,t){var n=i.getNodeSize(e).as_circle;return t?(n.x=t.x,n.y=t.y):(n.x=e.getPositionX(),n.y=e.getPositionY()),n.r2=2*n.r,n},i.get_point_on_the_line=function(e,t){var n=null;return n=t.hasOwnProperty("angle")?t.angle:i.math.get_angle_in_radian_between_two_points(t.to,t.from),{x:t.from.x+Math.cos(n)*e,y:t.from.y+Math.sin(n)*e}},i.check_collision_circle_circle=function(e,t){var n=i.getNodeSize(e).as_circle,o=i.getNodeSize(t).as_circle;return i.check_if_two_circle_are_overlapped_with_their_center_coordinate_and_radius(n,o)},i.check_if_two_circle_are_overlapped_with_their_center_coordinate_and_radius=function(e,t){var n=e.x-t.x,i=e.y-t.y;return e.r+t.r>Math.sqrt(n*n+i*i)},i.check_collision_polygon_circle=function(e,t){if(e.collider_type==i.RECTANGLE_COLLIDER&&e.option_level==i.OPTION_LEVEL_LIGHT&&t.option_level==i.OPTION_LEVEL_LIGHT)return i.check_collision_rectangle_circle(e,t);for(var n=!1,o=i.get_polygon_line_path(e),r=i.getNodeSize(t).as_circle,_=0;_<o.length&&!n;_++)n=0!=i.check_intersection_line_circle(o[_],r).length;if(i.ACTIVE_INSIDE_COLLISION&&!n&&!(n=i.isPointIsInsideNode(e,{x:r.x,y:r.y},o))&&e.collider_type==i.POLYGON_COLLIDER){var c=o;for(_=0;!n&&_<c.length;_++)n=i.checkPointIsInsideCircle(r,c[_].first)}return n},i.check_collision_polygon_polygon=function(e,t){if(e.option_level==i.OPTION_LEVEL_LIGHT&&t.option_level==i.OPTION_LEVEL_LIGHT&&e.collider_type==i.RECTANGLE_COLLIDER&&t.collider_type==i.RECTANGLE_COLLIDER){var n=i.getNodeSize(e).as_rectangle,o=i.getNodeSize(t).as_rectangle;return!(o.x>n.x+n.w||o.x+o.w<n.x||o.y>n.y+n.h||o.y+o.h<n.y)}for(var r=!1,_=i.get_polygon_line_path(e),c=i.get_polygon_line_path(t),a=0;a<_.length&&!r;a++)for(var l=0;l<c.length&&!r;l++)r=i.check_intersection_line_line(_[a],c[l]);if(i.ACTIVE_INSIDE_COLLISION){if(!r)for(a=0;a<_.length&&!r;a++)r=i.isPointIsInsideNode(t,_[a].first,c);if(!r)for(a=0;a<c.length&&!r;a++)r=i.isPointIsInsideNode(e,c[a].first,_)}return r},i.change_rect_type1_to_type2=function(e){return i.make_rect_cover_things([e],!1,2)},i.change_rect_type2_to_type1=function(e){var t=[{first:{x:e.left,y:e.bottom}},{first:{x:e.left,y:e.top}},{first:{x:e.right,y:e.top}},{first:{x:e.right,y:e.bottom}}];return t[0].second=t[1].first,t[1].second=t[2].first,t[2].second=t[3].first,t[3].second=t[0].first,t},i.make_rect_cover_things=function(e,t,n){var i=null,o=null,r=null,_=null;e.forEach(e=>{void 0!==e.r?(t&&$cc.gen_simple_dot(e,2*e.r,cc.color(255,155,55,255)),e=[{first:{x:e.x-e.r,y:e.y-e.r}},{first:{x:e.x-e.r,y:e.y+e.r}},{first:{x:e.x+e.r,y:e.y+e.r}},{first:{x:e.x+e.r,y:e.y-e.r}}]):t&&e.forEach(e=>{$cc.gen_simple_line(e).setAdvColor(cc.color(255,255,255,255))}),e.forEach(e=>{null===i&&(i=e.first.x),i>e.first.x&&(i=e.first.x),null===o&&(o=e.first.x),o<e.first.x&&(o=e.first.x),null===r&&(r=e.first.y),r>e.first.y&&(r=e.first.y),null===_&&(_=e.first.y),_<e.first.y&&(_=e.first.y)})});var c=null;return 1===n?((c=[{first:{x:i,y:r}},{first:{x:i,y:_}},{first:{x:o,y:_}},{first:{x:o,y:r}}])[0].second=c[1].first,c[1].second=c[2].first,c[2].second=c[3].first,c[3].second=c[0].first):c={left:i,top:_,right:o,bottom:r},c},i.check_collision=function(e,t){var n=!1;return n||e.collider_type!=i.CIRCLE_COLLIDER||t.collider_type!=i.CIRCLE_COLLIDER||(1,n=i.check_collision_circle_circle(t,e)),n||e.collider_type!=i.CIRCLE_COLLIDER||t.collider_type!=i.RECTANGLE_COLLIDER||(2,n=i.check_collision_polygon_circle(t,e)),n||e.collider_type!=i.CIRCLE_COLLIDER||t.collider_type!=i.POLYGON_COLLIDER||(3,n=i.check_collision_polygon_circle(t,e)),n||e.collider_type!=i.RECTANGLE_COLLIDER||t.collider_type!=i.CIRCLE_COLLIDER||(4,n=i.check_collision_polygon_circle(e,t)),n||e.collider_type!=i.RECTANGLE_COLLIDER||t.collider_type!=i.RECTANGLE_COLLIDER||(5,n=i.check_collision_polygon_polygon(e,t)),n||e.collider_type!=i.RECTANGLE_COLLIDER||t.collider_type!=i.POLYGON_COLLIDER||(6,n=i.check_collision_polygon_polygon(t,e)),n||e.collider_type!=i.POLYGON_COLLIDER||t.collider_type!=i.CIRCLE_COLLIDER||(7,n=i.check_collision_polygon_circle(e,t)),n||e.collider_type!=i.POLYGON_COLLIDER||t.collider_type!=i.RECTANGLE_COLLIDER||(8,n=i.check_collision_polygon_polygon(t,e)),n||e.collider_type!=i.POLYGON_COLLIDER||t.collider_type!=i.POLYGON_COLLIDER||(9,n=i.check_collision_polygon_polygon(t,e)),n},i.math.get_coordinate_of_circle_stick_circle=function(e){var t={r:e.collide_circle.r+e.moving_circle.r,x:e.collide_circle.x,y:e.collide_circle.y},n={x:e.position_before.x,y:e.position_before.y},o={x:e.position_current.x,y:e.position_current.y},r=i.math.get_angle_in_radian_between_two_points(n,o),_=i.math.get_angle_in_radian_between_two_points(o,n),c={first:n,second:i.math.get_coordinate_distance_away_from_center_with_radian(i.math.INFINITY,n,r)},a=i.check_intersection_line_circle(c,t),l={};a.length<2&&(a=i.check_intersection_line_circle({first:n,second:i.math.get_coordinate_distance_away_from_center_with_radian(i.math.INFINITY,n,_)},t));var s=[];for(var h in a)a[h]&&s.push({coordinate:a[h]});if((s=i.math.sort_list_by_distance(s,n)).length>0){a=s[0].coordinate,(a=i.math.get_coordinate_distance_away_from_center_with_radian(t.r,t,i.math.get_angle_in_radian_between_two_points(t,a))).r=e.moving_circle.r;for(;i.check_if_two_circle_are_overlapped_with_their_center_coordinate_and_radius(e.collide_circle,a);)(a=i.math.get_coordinate_distance_away_from_center_with_radian(i.math.EPSILON,a,_)).r=e.moving_circle.r}l={place_to_be:null,next_angle:null,error:""};return a&&(l.place_to_be=a,l.next_angle=i.math.calculate_next_angle_of_moving_circle_collided_with_other_circle(a,t,c.first,c.second)),l},i.is_two_points_same=function(e,t){return!(!e||!t)&&(e.x===t.x&&e.y===t.y)},i.math.check_collision_plp_circle=function(e,t){for(var n=!1,o=0;!n&&o<e.length;o++)i.check_intersection_line_circle(e[o],t).length>0&&(n=!0);return n||(n=i.checkPointIsInsidePolygon(e,t)),n},i.math.calculate_next_angle_of_moving_circle_collided_with_other_circle=function(e,t,n,o){var r=i.math.get_angle_in_radian_between_two_points(e,t)+Math.PI/2;return i.math.calculate_next_angle_of_moving_circle_collided_with_other_line({first:i.math.get_coordinate_distance_away_from_center_with_radian(1,t,r),second:t},n,o)},i.math.calculate_next_angle_of_moving_circle_collided_with_other_line=function(e,t,n){return i.math.calc_angle(e.first,e.second,i.math.conv_degree_for_human(i.math.convert_radian_to_degrees(i.math.get_angle_in_radian_between_two_points(t,n))))},i.math.make_square_coordinate_with_circle_direction=function(e){var t=i.math.get_distance_between_two_point(e.position_before,e.position_current),n=[],o=i.math.get_coordinate_distance_away_from_center_with_radian(e.circle_info.r/2*2,e.position_before,i.math.get_angle_in_radian_between_two_points(e.position_before,e.position_current)+Math.PI/2);n.push(o);var r=i.math.get_coordinate_distance_away_from_center_with_radian(t,o,i.math.get_angle_in_radian_between_two_points(e.position_before,e.position_current));n.push(r);var _=i.math.get_coordinate_distance_away_from_center_with_radian(2*e.circle_info.r,r,i.math.get_angle_in_radian_between_two_points(e.position_before,e.position_current)+-Math.PI/2);n.push(_);var c=i.math.get_coordinate_distance_away_from_center_with_radian(e.circle_info.r/2*2,e.position_before,i.math.get_angle_in_radian_between_two_points(e.position_before,e.position_current)+-Math.PI/2);return n.push(c),n=i.points_to_polypath(n)},i.math.get_coordinate_distance_away_from_center_with_radian=function(e,t,n){return n+=Math.PI,{x:t.x+Math.cos(n)*e,y:t.y+Math.sin(n)*e}},i.check_is_point_on_rect=function(e,t){return(e.y==t.top||e.y==t.bottom)&&t.left<=e.x&&t.right>=e.x||(e.x==t.left||e.x==t.right)&&t.bottom<=e.y&&t.top>=e.y},i.check_line_is_stick_through_rect=function(e,t){let n=e.first,i=e.second;for(let e=0;e<2;e++){if(n.y==t.top&&i.y==t.top&&n.x<t.left&&i.x>=t.left)return!0;if(n.y==t.bottom&&i.y==t.bottom&&n.x<t.left&&i.x>=t.left)return!0;if(n.y==t.top&&i.y==t.top&&n.x>t.right&&i.x<=t.right)return!0;if(n.y==t.bottom&&i.y==t.bottom&&n.x>t.right&&i.x<=t.right)return!0;if(n.x==t.left&&i.x==t.left&&n.y>t.top&&i.y<=t.top)return!0;if(n.x==t.right&&i.x==t.right&&n.y>t.top&&i.y<=t.top)return!0;if(n.x==t.left&&i.x==t.left&&n.y<t.bottom&&i.y>=t.bottom)return!0;if(n.x==t.right&&i.x==t.right&&n.y<t.bottom&&i.y>=t.bottom)return!0;let e=i;i=n,n=e}return!1},i.check_intersection_line_rect=function(e,t){if(!(t.left>e.first.x||t.right<e.first.x||t.top<e.first.y||t.bottom>e.first.y)||!(t.left>e.second.x||t.right<e.second.x||t.top<e.second.y||t.bottom>e.second.y))return!0;if(i.check_is_point_on_rect(e.first,t)||i.check_is_point_on_rect(e.second,t))return!0;let n=i.change_rect_type2_to_type1(t);for(let t=0,o=n.length;t<o;t++)if(i.check_intersection_line_line(n[t],e,!0))return!0;return!!i.check_line_is_stick_through_rect(e,t)},i.math.get_coordinate_of_circle_stick_line=function(e){var t=e.circle_radius,n={x:e.position_before.x,y:e.position_before.y},o={x:e.position_current.x,y:e.position_current.y},r=i.math.INFINITY,_=i.math.get_angle_in_radian_between_two_points(n,o),c=i.math.get_coordinate_distance_away_from_center_with_radian(r,n,_),a=i.math.get_coordinate_distance_away_from_center_with_radian(-r,n,_),l={name:"cdl",first:n,second:c},s={first:a,second:c},h={name:"l",first:{x:e.collide_line.first.x,y:e.collide_line.first.y},second:{x:e.collide_line.second.x,y:e.collide_line.second.y}},d=h.first,f=h.second,g=i.math.get_distance_between_two_point(d,f),y=i.math.get_angle_in_radian_between_two_points(d,f),u=i.math.get_coordinate_distance_away_from_center_with_radian(t,d,y+Math.PI/2),x={name:"ll",first:u,second:i.math.get_coordinate_distance_away_from_center_with_radian(g,u,y)},p=i.math.get_coordinate_distance_away_from_center_with_radian(t,d,y+-Math.PI/2),w={name:"lr",first:p,second:i.math.get_coordinate_distance_away_from_center_with_radian(g,p,y)},m=[h,x,w];for(var I=[],v=0;v<m.length;v++){let e;e=i.check_intersection_line_line(s,m[v],!0),I.push({coordinate:e,body:m[v]})}var L=null,b=0,E=null;if(0==(I=i.math.sort_list_by_distance(I,n)).length||I.length>0&&"l"==I[0].body.name||1==I.length&&"l"!=I[0].body.name){d.r=t,f.r=t;var P=[];if([d,f].forEach(e=>{i.check_intersection_line_circle(l,e).forEach(t=>{P.push({coordinate:t,circle:e})})}),(P=i.math.sort_list_by_distance(P,n)).length>0&&(L=P[0].coordinate),L){L.r=t;var N=i.check_intersection_line_circle(h,L);I.length>0&&"l"!=I[0].body.name&&2==N.length&&(b=1,(L=I[0].coordinate).r=t)}}else I.length>=2&&"l"==I[1].body.name&&(L=I[0].coordinate,b=1);let O=0;if(L){var C=L;C.r=t;var T=i.math.EPSILON,k=null;k=void 0!==e.virtual_height&&void 0!==e.real_height?e.real_height/e.virtual_height:$cc.ccph(1)/cocosKst.const.sizeRatio.height,b||(T*=1e3);let o=!1;for(;i.check_intersection_line_circle(h,C).length>0;){if(O>10){o=!0;break}O++,(C=i.math.get_coordinate_distance_away_from_center_with_radian(T,C,i.math.get_angle_in_radian_between_two_points(c,n))).r=t,(T*=5)>k&&(T=k)}if(o){var R=i.math.get_distance_between_two_point(e.position_before,e.position_current),S=100*k;(R>S||R<=0)&&(R=S),T=R;for(var A=o,M=o;A!==M&&(A=M,T/=2),(C=i.math.get_coordinate_distance_away_from_center_with_radian(T*(M?1:-1),C,i.math.get_angle_in_radian_between_two_points(c,n))).r=t,O++,M=i.check_intersection_line_circle(h,C).length>0,!(k>=T)||M;);}if((L=C).line_width=2*t,L.r=t,delete L.line_width,1==b)E=i.math.calculate_next_angle_of_moving_circle_collided_with_other_line(h,e.position_before,e.position_current);else{var G=i.math.get_distance_between_two_point(L,h.first)<i.math.get_distance_between_two_point(L,h.second)?h.first:h.second;E=i.math.calculate_next_angle_of_moving_circle_collided_with_other_circle(L,G,n,c)}}return{rp_point:L,cdl_line:l,center_line:h,line_left:x,line_right:w,next_angle:E}},i.math.sort_list_by_distance=function(e,t){for(var n=[],o=[],r=0;r<e.length;r++){var _=null,c=null,a=-1;for(var l in e){var s=e[l].coordinate;if(s){var h=i.math.get_distance_between_two_point(t,s);(null==c||null!==_&&_>h)&&(o.includes(l)||(c=e[l],_=h,a=l))}}c&&(o.push(a),n.push(c))}return n},i.get_aite_angle_direction=function(e,t,n){n&&(t=i.math.convert_degrees_to_radian(t),e=i.math.convert_degrees_to_radian(e));var o=i.calc_difference_between_two_radian(t,e);let r=e+o,_=e-o;r>Math.PI&&(r-=2*Math.PI),_>Math.PI&&(_-=2*Math.PI),r<=-Math.PI&&(r+=2*Math.PI),_<=-Math.PI&&(_+=2*Math.PI);let c=i.get_distance_between_two_number(t,r),a=i.get_distance_between_two_number(t,_);return c>=2*Math.PI&&(c-=2*Math.PI),a>=2*Math.PI&&(a-=2*Math.PI),c<a},i.get_distance_between_two_number=function(e,t){return e>t?e-t:t-e},i.calc_mid_radian_between_two_line=function(e,t,n){var o=i.math.get_angle_in_radian_between_two_points(e.first,e.second),r=i.math.get_angle_in_radian_between_two_points(t.second,t.first);return void 0===n&&(n=.5),i.calc_difference_between_two_radian(o,r)*n},i.is_vv_in_radian=function(e,t,n){return void 0===n&&(n=Math.PI/2),i.calc_difference_between_two_radian(e,t)<n},i.calc_difference_between_two_radian=function(e,t){var n=e-t;return n<0&&(n*=-1),n>Math.PI?2*Math.PI-n:n},i.make_vector_with_two_point_and_a_vector=function(e,t,n){var o=i.math.get_angle_in_radian_between_two_points(e,t),r=o-Math.PI,_=i.math.get_angle_in_radian_between_two_points(n.first,n.second),c=!1;return i.is_vv_in_radian(o,_)&&(c=!0),i.is_vv_in_radian(r,_)&&(c=!0,[e,t]=[t,e]),c?{first:e,second:t}:null},i.make_collision_area=function(e,t){let n=null,o=i.check_intersection_line_line(e,t,!0);if(o)n=[{direction:i.math.get_angle_in_radian_between_two_points(e.first,t.first),plp:[{first:o,second:e.first},{first:e.first,second:t.first},{first:t.first,second:o}],future:{first:t.first,second:o}},{direction:i.math.get_angle_in_radian_between_two_points(e.second,t.second),plp:[{first:o,second:e.second},{first:e.second,second:t.second},{first:t.second,second:o}],future:{first:t.second,second:o}}];else{let o={first:e.first,second:t.first},r={first:e.second,second:t.second};n=[{direction:i.calc_angle_average_of_two_lines(o,r),plp:[{first:e.first,second:e.second},{first:e.second,second:t.second},{first:t.second,second:t.first},{first:t.first,second:e.first}],future:t}]}return n},i.check_area_and_ballnode=function(e,t,n){let o=e,r=!1,_=t.future;if(r=!!n||i.check_intersection_line_circle(t.plp[2],o).length>0,r||i.checkPointIsInsidePolygon(t.plp,o)&&(r=!0),r){let e={circle_radius:o.r,position_before:i.math.get_coordinate_distance_away_from_center_with_radian(1e6,o,t.direction),position_current:o,collide_line:_};if(n){let n=[];if(t.plp.forEach(t=>{e.collide_line=t;var o=i.math.get_coordinate_of_circle_stick_line(e);o.rp_point&&(n[n.length]={coordinate:o.rp_point})}),n.length>0){return i.math.sort_list_by_distance(n,e.position_before)[0].coordinate}return null}var c=i.math.get_coordinate_of_circle_stick_line(e);if(c.rp_point)return c.rp_point}},i.calc_angle_average_of_two_lines=function(e,t){var n=i.math.get_angle_in_radian_between_two_points(e.first,e.second),o=i.math.get_angle_in_radian_between_two_points(t.first,t.second),r=i.calc_difference_between_two_radian(n,o),_=i.math.get_distance_between_two_point(e.first,e.second),c=i.math.get_distance_between_two_point(t.first,t.second),a=0;a=_>c?c/(_+c):_/(_+c);let l=0;if(_<c){l=i.get_aite_angle_direction(o,n)?o+a*r:o-a*r}else{i.get_aite_angle_direction(n,o);l=i.get_aite_angle_direction(n,o)?n+a*r:n-a*r}return l>Math.PI&&(l-=2*Math.PI),l},i.checkRayCastedCollided=function(e,t){for(var n=!1,o=t.length,r=0;!n&&r<o;r++){var _=null,c=t[r]instanceof cc.Node,a=t[r];if(c){if(!n){var l=a.getCircleInfo();i.check_if_two_circle_are_overlapped_with_their_center_coordinate_and_radius(l,e)&&(n=!0)}}else if(_=a,!n)n=i.check_intersection_line_circle(_,e).length>0}return n},i.bouncing_path_of_ball=function(e,t,n,o,r,_,c,a){let l=[];for(l[l.length]={body:null,coordinate:o,next_angle_info:n};;){let s=i.calculate_coordinate(o,n,e,r,_,c,a);if(s.body&&n!==s.next_angle_info&&(l[l.length]=s),o=s.coordinate,n=s.next_angle_info,l.length>t)break}return l},i.check_line_collided=function(e,t,n){let o=!1;for(let n=0,r=t.length;n<r;n++)if(i.check_intersection_line_line(t[n],e,!0)){o=!0;break}return o||(o=i.check_intersection_line_circle(e,n).length>0),o},i.calculate_coordinate=function(e,t,n,o,r,_,c){var a={circle_info:{r:e.r},position_before:e,position_current:i.math.get_coordinate_distance_away_from_center_with_degree(n,e,t)},l=i.math.make_square_coordinate_with_circle_direction(a),s={x:a.position_current.x,y:a.position_current.y,r:a.circle_info.r},h={x:a.position_before.x,y:a.position_before.y,r:a.circle_info.r},d={body:null,coordinate:s,next_angle_info:t},f=null;if(o){let e=o.get_section(i.make_rect_cover_things([s,l],!1,2));for(let t=0,n=e.length;t<n;t++)e[t].line.forEach(e=>{let t=!1;for(let n=0,o=l.length;n<o;n++)if(i.check_intersection_line_line(l[n],e,!0)){t=!0;break}t||(t=i.check_intersection_line_circle(e,s).length>0),t&&(null===f&&(f=[]),f[f.length]=e)})}if(r.length>0&&r.loop((function(e){if(void 0!==e.body){if(!_&&e.body instanceof PixiPolygon){if(e.body.is_vector()){let t=e.body.get_vector();i.check_line_collided(t,l,s)&&(null===f&&(f=[]),t.extd=e.body,f[f.length]=t)}else{let t=e.body.getWorldPathInPLPType(),n=t.length;for(let o=0;o<n;o++){let n=t[o];i.check_line_collided(n,l,s)&&(null===f&&(f=[]),n.extd=e.body,f[f.length]=n)}}}if(_&&e.body instanceof AdvPolygon){if(e.body.is_vector()){let t=e.body.get_vector();i.check_line_collided(t,l,s)&&(null===f&&(f=[]),t.extd=e.body,f[f.length]=t)}else{let t=e.body.getWorldPathInPLPType(),n=t.length;for(let o=0;o<n;o++){let n=t[o];i.check_line_collided(n,l,s)&&(null===f&&(f=[]),n.extd=e.body,f[f.length]=n)}}}if(_&&e.body instanceof PolyNode){let t=e.body.getNode().get_custom_box_attr("polyline");t&&e.body.translatePLInWorld(t).forEach(e=>{let t=!1;for(let n=0,o=l.length;n<o;n++)if(i.check_intersection_line_line(l[n],e,!0)){t=!0;break}t||(t=i.check_intersection_line_circle(e,s).length>0),t&&(null===f&&(f=[]),f[f.length]=e)})}}})),f&&f.length>0){var g=[];if(f.forEach(e=>{var t=null,n=null,o=null;if(_&&e instanceof cc.Node){var r={collide_circle:e.getCircleInfo(),moving_circle:{r:s.r},position_before:h,position_current:s},a=i.math.get_coordinate_of_circle_stick_circle(r);a.place_to_be&&(i.checkRayCastedCollided(a.place_to_be,f)||(t=a.place_to_be,n=a.next_angle,o=e))}else{r={circle_radius:s.r,position_before:h,position_current:s,collide_line:e};c&&(r.real_height=c.r,r.virtual_height=c.v);var l=i.math.get_coordinate_of_circle_stick_line(r);t=l.rp_point,n=l.next_angle,o=e}null!==t&&g.push({coordinate:t,body:o,next_angle_info:n})}),(g=i.math.sort_list_by_distance(g,h)).length>0){d.body=g[0].body,d.coordinate=g[0].coordinate,d.next_angle_info=g[0].next_angle_info,i.math.get_distance_between_two_point(s,h)<i.math.get_distance_between_two_point(s,d.coordinate)&&(d.coordinate=h,d.next_angle_info=g[0].next_angle_info)}}return d},i.check_intersection_rect_line=function(e,t){let n=i.checkPointIsInsidePolygon(e,t.second)||i.checkPointIsInsidePolygon(e,t.first);if(!n)for(let o=0,r=e.length;o<r;o++)if(i.check_intersection_line_line(e[o],t,!0)){n=!0;break}return n},i.convert_XYX_to_PLP=function(e,t){var n=[];for(let i=0,o=e.length-1;i<o;i++){let o=t?{x:e[i].x,y:e[i].y}:e[i],r=t?{x:e[i+1].x,y:e[i+1].y}:e[i+1];n[n.length]={first:o,second:r}}return n.length>0&&(n[n.length]={first:n[n.length-1].second,second:n[0].first}),n},i.check_type_of_vector_chain=function(e){return e.length?e[0].first?i.VECTOR_CHAIN_TYPE_PLP:i.VECTOR_CHAIN_TYPE_XYX:i.VECTOR_CHAIN_TYPE_NONE},i.reset_length_of_vector_from_mid=function(e,t){let n={},o=i.math.get_angle_in_radian_between_two_points(t.second,t.first),r=i.math.get_coordinate_between_two_points(t.second,t.first,.5);return n.first=i.math.get_coordinate_distance_away_from_center_with_radian(-e,r,o),n.second=i.math.get_coordinate_distance_away_from_center_with_radian(e,r,o),n},i.convert_PLP_to_XYX=function(e,t,n){let i=[];for(let n=0,o=e.length;n<o;n++){let r=n===o-1;t?(i[i.length]={x:e[n].first.x,y:e[n].first.y},r&&(i[i.length]={x:e[n].second.x,y:e[n].second.y})):(i[i.length]=e[n].first,r&&(i[i.length]=e[n].second))}return n&&i.splice(i.length-1,1),i},i.divide_polygon=function(e,t){{let n=i.convert_XYX_to_PLP(e),o=t.length,r=0,_=0;for(let e=0;e<o;e++){let c=i.checkPointIsInsidePolygon(n,t[e]);e===o-1||0===e?c||r++:c&&_++}let c=2;if(r<c)return null;if(_<o-c){let r=!1,_=[],c=[];for(let e=0;e<o-1;e++){let o={first:t[e],second:t[e+1]},a=!1;for(let e=0;e<n.length;e++)if(i.check_intersection_line_line(n[e],o,!0)){a=!0;break}if(r?_[_.length]=o:a&&(_[_.length]=o,r=!0),a){let e=r;r=i.checkPointIsInsidePolygon(n,o.second),r||e==r||(c[c.length]=_,_=[])}}let a=[],l=[e];for(let e=0;e<c.length;e++){let t=[];for(let n=0;n<c[e].length;n++)t[t.length]=c[e][n].first,n===c[e].length-1&&(t[t.length]=c[e][n].second);a[a.length]=t}for(let e=0;e<a.length;e++){let t=a[e],n=[];for(;l.length;){let e=l.splice(0,1)[0],o=i.divide_polygon(e,t);if(o)for(let e=0;e<o.length;e++)n[n.length]=o[e]}l=n}return l}}{let n={first:t[0],second:t[1]},o={first:t[t.length-2],second:t[t.length-1]};if(t.length>=3){let t=[];[n,o].forEach(n=>{for(let o=0;o<e.length;o++){let r={a:n,b:{first:e[o],second:e[o!==e.length-1?o+1:0]}},_=i.check_intersection_line_line(r.a,r.b,!0);_&&t.push({idx:o,coo:_,lnd:r.b})}}),t[0].idx===t[1].idx&&(e=JSON.parse(JSON.stringify(e))).splice(t[0].idx+1,0,i.math.get_coordinate_between_two_points(t[0].coo,t[1].coo,.5))}}let n=[];for(let o=0;o<2;o++){let r=[];n.push(r);let _=0===o?i.convert_XYX_to_PLP(t):i.convert_XYX_to_PLP(t.reverse());_.splice(_.length-1,1);let c=[],a=null,l=0,s=-1;for(let t=0;t<e.length;t++){let n=e[t],o=e[t!==e.length-1?t+1:0],h=null,d=-1;for(let e=0;e<_.length;e++){let t={a:_[e],b:{first:n,second:o}};if(!h&&(h=i.check_intersection_line_line(t.a,t.b,!0),h)){d=e;break}}if(h){if(l++,a||(a=[]),a&&(a[a.length]=h,l<2&&(s=d,a[a.length]=o)),l>=2){r[r.length]=a;for(let e=s-1;e>=d;e--)a[a.length]=_[s-(e+1)].second,c[c.length]=_[e].second;c[c.length]=h,c[c.length]=o,l=0,a=null}1===l&&(0===c.length&&(c[c.length]=n),c[c.length]=h)}else a?a[a.length]=o:(0===c.length&&(c[c.length]=n),c[c.length]=o)}r[r.length]=c;for(let e=0;e<r.length;e++)r[e][r[e].length-1].x===r[e][0].x&&r[e][r[e].length-1].y===r[e][0].y&&r[e].splice(r[e].length-1,1)}let o=-1,r=null;for(let e=0;e<n.length;e++){let t=0;for(let i=0;i<n[e].length;i++)t+=n[e][i].length;0===e?o=t:r=o<t?n[n.length-1]:n[0]}return r},i.extract_XYX=function(e,t){let n,i,o,r,_=[];t=t||{x:0,y:0};for(let t=0,_=e.length;t<_;t++)void 0!==n&&void 0!==o||(n=e[t].x,o=e[t].x),void 0!==i&&void 0!==r||(i=e[t].y,r=e[t].y),n>e[t].x&&(n=e[t].x),i>e[t].y&&(i=e[t].y),o<e[t].x&&(o=e[t].x),r<e[t].y&&(r=e[t].y);let c=o-n,a=r-i;for(let o=0;o<e.length;o++){let r=c*t.x,l=a*t.y;_[_.length]={x:e[o].x-(n+r),y:e[o].y-(i+l)}}return{path:_,width:c,height:a,pivot:t,min_x:n+t.x*c,min_y:i+t.y*a}},i.md5sum=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,i,o,r,_;return o=2147483648&e,r=2147483648&t,_=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(i=1073741824&t)?2147483648^_^o^r:n|i?1073741824&_?3221225472^_^o^r:1073741824^_^o^r:_^o^r}function i(e,i,o,r,_,c,a){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(i,o,r),_),a)),n(t(e,c),i)}function o(e,i,o,r,_,c,a){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(i,o,r),_),a)),n(t(e,c),i)}function r(e,i,o,r,_,c,a){return e=n(e,n(n(function(e,t,n){return e^t^n}(i,o,r),_),a)),n(t(e,c),i)}function _(e,i,o,r,_,c,a){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(i,o,r),_),a)),n(t(e,c),i)}function c(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var a,l,s,h,d,f,g,y,u,x=Array();for(x=function(e){for(var t,n=e.length,i=n+8,o=16*((i-i%64)/64+1),r=Array(o-1),_=0,c=0;c<n;)_=c%4*8,r[t=(c-c%4)/4]=r[t]|e.charCodeAt(c)<<_,c++;return _=c%4*8,r[t=(c-c%4)/4]=r[t]|128<<_,r[o-2]=n<<3,r[o-1]=n>>>29,r}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e)),f=1732584193,g=4023233417,y=2562383102,u=271733878,a=0;a<x.length;a+=16)l=f,s=g,h=y,d=u,f=i(f,g,y,u,x[a+0],7,3614090360),u=i(u,f,g,y,x[a+1],12,3905402710),y=i(y,u,f,g,x[a+2],17,606105819),g=i(g,y,u,f,x[a+3],22,3250441966),f=i(f,g,y,u,x[a+4],7,4118548399),u=i(u,f,g,y,x[a+5],12,1200080426),y=i(y,u,f,g,x[a+6],17,2821735955),g=i(g,y,u,f,x[a+7],22,4249261313),f=i(f,g,y,u,x[a+8],7,1770035416),u=i(u,f,g,y,x[a+9],12,2336552879),y=i(y,u,f,g,x[a+10],17,4294925233),g=i(g,y,u,f,x[a+11],22,2304563134),f=i(f,g,y,u,x[a+12],7,1804603682),u=i(u,f,g,y,x[a+13],12,4254626195),y=i(y,u,f,g,x[a+14],17,2792965006),f=o(f,g=i(g,y,u,f,x[a+15],22,1236535329),y,u,x[a+1],5,4129170786),u=o(u,f,g,y,x[a+6],9,3225465664),y=o(y,u,f,g,x[a+11],14,643717713),g=o(g,y,u,f,x[a+0],20,3921069994),f=o(f,g,y,u,x[a+5],5,3593408605),u=o(u,f,g,y,x[a+10],9,38016083),y=o(y,u,f,g,x[a+15],14,3634488961),g=o(g,y,u,f,x[a+4],20,3889429448),f=o(f,g,y,u,x[a+9],5,568446438),u=o(u,f,g,y,x[a+14],9,3275163606),y=o(y,u,f,g,x[a+3],14,4107603335),g=o(g,y,u,f,x[a+8],20,1163531501),f=o(f,g,y,u,x[a+13],5,2850285829),u=o(u,f,g,y,x[a+2],9,4243563512),y=o(y,u,f,g,x[a+7],14,1735328473),f=r(f,g=o(g,y,u,f,x[a+12],20,2368359562),y,u,x[a+5],4,4294588738),u=r(u,f,g,y,x[a+8],11,2272392833),y=r(y,u,f,g,x[a+11],16,1839030562),g=r(g,y,u,f,x[a+14],23,4259657740),f=r(f,g,y,u,x[a+1],4,2763975236),u=r(u,f,g,y,x[a+4],11,1272893353),y=r(y,u,f,g,x[a+7],16,4139469664),g=r(g,y,u,f,x[a+10],23,3200236656),f=r(f,g,y,u,x[a+13],4,681279174),u=r(u,f,g,y,x[a+0],11,3936430074),y=r(y,u,f,g,x[a+3],16,3572445317),g=r(g,y,u,f,x[a+6],23,76029189),f=r(f,g,y,u,x[a+9],4,3654602809),u=r(u,f,g,y,x[a+12],11,3873151461),y=r(y,u,f,g,x[a+15],16,530742520),f=_(f,g=r(g,y,u,f,x[a+2],23,3299628645),y,u,x[a+0],6,4096336452),u=_(u,f,g,y,x[a+7],10,1126891415),y=_(y,u,f,g,x[a+14],15,2878612391),g=_(g,y,u,f,x[a+5],21,4237533241),f=_(f,g,y,u,x[a+12],6,1700485571),u=_(u,f,g,y,x[a+3],10,2399980690),y=_(y,u,f,g,x[a+10],15,4293915773),g=_(g,y,u,f,x[a+1],21,2240044497),f=_(f,g,y,u,x[a+8],6,1873313359),u=_(u,f,g,y,x[a+15],10,4264355552),y=_(y,u,f,g,x[a+6],15,2734768916),g=_(g,y,u,f,x[a+13],21,1309151649),f=_(f,g,y,u,x[a+4],6,4149444226),u=_(u,f,g,y,x[a+11],10,3174756917),y=_(y,u,f,g,x[a+2],15,718787259),g=_(g,y,u,f,x[a+9],21,3951481745),f=n(f,l),g=n(g,s),y=n(y,h),u=n(u,d);return(c(f)+c(g)+c(y)+c(u)).toLowerCase()},i.find_center_point_of_polygon=function(e){let t,n,i,o,r,_=e||[],c=e.length,a=0,l=0,s=0;for(t=0,n=c-1;t<c;n=t,t+=1)o=_[t],r=_[n],i=o.x*r.y-r.x*o.y,l+=(o.x+r.x)*i,s+=(o.y+r.y)*i;for(t=0,n=c-1;t<c;n=t,t+=1)o=_[t],r=_[n],a+=o.x*r.y,a-=o.y*r.x;return a/=2,i=6*a,{x:l/i,y:s/i}},i.is_included_in_list=function(e,t){for(let n=0,i=e.length;n<i;n++)if(e[n]===t)return!0;return!1},i.polyInter=function(e,t){for(let n=0,o=e.length;n<o;n++)for(let o=0,r=t.length;o<r;o++)if(i.check_intersection_line_line(e[n],t[o],!0))return!0}}]);
